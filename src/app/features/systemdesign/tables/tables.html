<div class="table-container ">

    <table mat-table [dataSource]="pagedData" table table-responsive w-100>

        <!-- ✅ Checkbox Column (FIRST COLUMN) -->
        <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
                <app-checkbox [checked]="isAllSelected()" [indeterminate]="isSomeSelected()"
                    (checkedChange)="toggleAllRows($event)" label=""></app-checkbox>
            </th>

            <td mat-cell *matCellDef="let row" (click)="$event.stopPropagation()">
                <app-checkbox [checked]="selection.includes(row)" (checkedChange)="toggleRow(row)"
                    label=""></app-checkbox>
            </td>
        </ng-container>

        <!-- ✅ Dynamic Columns -->
        <ng-container *ngFor="let col of columns" [matColumnDef]="col.key">
            <th mat-header-cell *matHeaderCellDef class="mat-header-label">{{ col.label }}</th>

            <td mat-cell *matCellDef="let row" class="mat-content-td">

                <span [ngClass]="[
      col.class || '',
      col.classFn ? col.classFn(row) : ''
    ]" [class.clickable]="col.clickable" (click)="col.clickable && col.onClick ? col.onClick(row) : null">
                    <!-- {{ row[col.key] }} -->
                    {{ col.transform ? col.transform(row) : row[col.key] }}

                </span>

            </td>

        </ng-container>

        <!-- Rows -->
        <tr mat-header-row *matHeaderRowDef="displayedColumnKeys"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnKeys;"></tr>

    </table>

</div>

<!-- Pagination -->
<div class="pagination">
    <button class="pagination-btn" (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1">
        <img class="arrow-icon" src="/assets/images/icons/arrow-left-pg.svg" alt="Previous" height="20" width="20" />
    </button>

    <button class="pagination-btn" *ngFor="let page of totalPagesArray" (click)="onPageChange(page)"
        [disabled]="page === '...'" [class.active]="page === currentPage">
        <span class="pagecount text-body-2">{{ page }}</span>
    </button>

    <button class="pagination-btn" (click)="onPageChange(currentPage + 1)"
        [disabled]="currentPage === totalPagesArray.length">
        <img src="/assets/images/icons/arrow-right-pg.svg" height="20" width="20" alt="Previous" /></button>
</div>