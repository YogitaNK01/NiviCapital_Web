<div class="chart-wrapper p-2 m-2">
  <h3 class="chart-title">{{ title }}</h3>
  <svg [attr.width]="width" [attr.height]="height" [attr.viewBox]="'0 0 ' + width + ' ' + height">
    <!-- Grid lines -->
    <g *ngIf="showGrid">
      <g *ngFor="let tick of yTicks">
        <line
          [attr.x1]="padding.left"
          [attr.y1]="getYPos(tick)"
          [attr.x2]="width - padding.right"
          [attr.y2]="getYPos(tick)"
          stroke="#f0f0f0"
          stroke-width="1"
        />
      </g>
    </g>

    <!-- Y-axis labels -->
    <g *ngIf="showYAxis">
      <g *ngFor="let tick of yTicks">
        <text
          [attr.x]="padding.left - 10"
          [attr.y]="getYPos(tick) + 4"
          text-anchor="end"
          class="axis-text"
        >{{ formatTickValue(tick) }}</text>
      </g>
    </g>

    <!-- Areas (render in reverse for proper stacking) -->
    <g *ngFor="let area of areas.slice().reverse()">
      <!-- Fill area -->
      <path
        *ngIf="shouldShowFill() && area.fillPath"
        [attr.d]="area.fillPath"
        [attr.fill]="area.fillColor"
        [attr.opacity]="fillOpacity"
      />
      <!-- Stroke line -->
      <path
        [attr.d]="area.strokePath"
        [attr.stroke]="area.strokeColor"
        [attr.stroke-width]="strokeWidth"
        fill="none"
        class="line"
      />
    </g>

    <!-- X-axis labels -->
    <g *ngIf="showXAxis">
      <g *ngFor="let label of labels; let i = index">
        <text
          [attr.x]="getXPos(i)"
          [attr.y]="height - 10"
          text-anchor="middle"
          class="axis-text"
        >{{ label }}</text>
      </g>
    </g>
  </svg>
</div>